<!doctype html>
<html lang="vi" data-bs-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tin Mới 24/7 – Demo Bootstrap Blog</title>
  <!-- Bootstrap 5.3 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <!-- Google Font (Inter) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{ --brand: #0d6efd; --muted:#6c757d; --radius-xl:1.25rem; }
    body{ font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; }
    .navbar-blur{ backdrop-filter:saturate(120%) blur(8px); }
    .card{ border-radius: var(--radius-xl); }
    .badge-views{ font-weight:600; letter-spacing:.2px; }
    .category-chip{ --p: .5rem 0.75rem; padding:var(--p); border-radius:999px; font-weight:600; font-size:.85rem; }
    .category-chip[data-color="tech"]{ background:#e8f2ff; color:#0b5ed7; }
    .category-chip[data-color="life"]{ background:#e9f7ef; color:#198754; }
    .category-chip[data-color="biz"]{ background:#fff3cd; color:#946200; }
    .category-chip[data-color="sport"]{ background:#f8d7da; color:#842029; }
    .category-chip[data-color="edu"]{ background:#f1e7fe; color:#5f37b4; }

    .comment-item{ border-left:4px solid var(--brand); padding-left:1rem; }
    .form-hint{ font-size:.85rem; color:var(--muted); }

    .article:hover .article-title{text-decoration:underline;}
    .line-clamp-2{ display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }

    /* Pagination active style tweak */
    .pagination .page-item.active .page-link{ box-shadow:0 0 0 .15rem rgba(13,110,253,.25); }
  </style>
</head>
<body>
  <!-- NAVBAR (Menu) -->
  <nav class="navbar navbar-expand-lg bg-body-tertiary sticky-top navbar-blur border-bottom">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#"><i class="bi bi-newspaper me-2"></i>Tin Mới 24/7</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav" aria-controls="mainNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link active" aria-current="page" href="#">Trang chủ</a></li>
          <li class="nav-item"><a class="nav-link" href="#cate">Danh mục</a></li>
          <li class="nav-item"><a class="nav-link" href="#latest">Mới nhất</a></li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Thêm</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#comments">Bình luận</a></li>
              <li><a class="dropdown-item" href="#about">Về chúng tôi</a></li>
            </ul>
          </li>
        </ul>
        <form class="d-flex" role="search" onsubmit="event.preventDefault(); doSearch();">
          <input id="searchInput" class="form-control me-2" type="search" placeholder="Tìm bài viết..." aria-label="Search">
          <button class="btn btn-primary" type="submit"><i class="bi bi-search"></i></button>
        </form>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="py-4 bg-light border-bottom">
    <div class="container">
      <div class="row align-items-center g-4">
        <div class="col-lg-8">
          <h1 class="display-6 fw-bold mb-2">Blog tin tức mẫu với Bootstrap 5</h1>
          <p class="text-secondary mb-0">Tích hợp: <strong>Navbar</strong>, <strong>Form Validation</strong> (bình luận), <strong>Badge lượt xem</strong>, màu chữ/nền theo <strong>danh mục</strong>, và <strong>Pagination</strong>.</p>
        </div>
        <div class="col-lg-4 text-lg-end">
          <button id="themeToggle" class="btn btn-outline-secondary"><i class="bi bi-moon-stars"></i> Chế độ tối/sáng</button>
        </div>
      </div>
    </div>
  </header>

  <!-- CATEGORY FILTERS -->
  <section id="cate" class="py-3">
    <div class="container">
      <div class="d-flex flex-wrap gap-2 align-items-center">
        <span class="fw-semibold text-secondary me-1">Danh mục:</span>
        <button class="btn btn-sm btn-outline-secondary active" data-filter="all">Tất cả</button>
        <span class="category-chip" data-color="tech" role="button" data-filter="tech">Công nghệ</span>
        <span class="category-chip" data-color="biz" role="button" data-filter="biz">Kinh doanh</span>
        <span class="category-chip" data-color="life" role="button" data-filter="life">Đời sống</span>
        <span class="category-chip" data-color="sport" role="button" data-filter="sport">Thể thao</span>
        <span class="category-chip" data-color="edu" role="button" data-filter="edu">Giáo dục</span>
      </div>
    </div>
  </section>

  <!-- ARTICLE LIST -->
  <main id="latest" class="py-4">
    <div class="container">
      <div id="articleList" class="row g-4"></div>

      <!-- PAGINATION -->
      <nav class="mt-4" aria-label="Phân trang bài viết">
        <ul id="pagi" class="pagination justify-content-center mb-0">
          <!-- JS will render -->
        </ul>
      </nav>
    </div>
  </main>

  <!-- COMMENTS -->
  <section id="comments" class="py-5 bg-body-tertiary border-top">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-6">
          <h2 class="h4 mb-3"><i class="bi bi-chat-left-text me-2"></i>Để lại bình luận</h2>
          <!-- FORM VALIDATION (Bootstrap) -->
          <form id="commentForm" class="needs-validation" novalidate>
            <div class="mb-3">
              <label for="cName" class="form-label">Họ tên</label>
              <input type="text" class="form-control" id="cName" placeholder="VD: Nguyễn Văn A" required minlength="2" maxlength="60">
              <div class="invalid-feedback">Vui lòng nhập họ tên (tối thiểu 2 ký tự).</div>
            </div>
            <div class="mb-3">
              <label for="cEmail" class="form-label">Email</label>
              <input type="email" class="form-control" id="cEmail" placeholder="you@example.com" required>
              <div class="invalid-feedback">Email không hợp lệ.</div>
            </div>
            <div class="mb-3">
              <label for="cArticle" class="form-label">Chọn bài viết</label>
              <select id="cArticle" class="form-select" required></select>
              <div class="invalid-feedback">Hãy chọn bài viết để bình luận.</div>
            </div>
            <div class="mb-3">
              <label for="cContent" class="form-label">Nội dung</label>
              <textarea id="cContent" class="form-control" rows="4" required minlength="10" maxlength="500" placeholder="Viết bình luận của bạn (10–500 ký tự)"></textarea>
              <div class="d-flex justify-content-between">
                <div class="invalid-feedback">Nội dung tối thiểu 10 ký tự.</div>
                <small id="charCount" class="form-hint">0/500</small>
              </div>
            </div>
            <div class="form-check mb-3">
              <input class="form-check-input" type="checkbox" value="1" id="cAgree" required>
              <label class="form-check-label" for="cAgree">Tôi đồng ý với nội quy bình luận.</label>
              <div class="invalid-feedback">Bạn cần đồng ý nội quy.</div>
            </div>
            <button class="btn btn-primary" type="submit"><i class="bi bi-send"></i> Gửi bình luận</button>
          </form>
        </div>
        <div class="col-lg-6">
          <h2 class="h4 mb-3">Bình luận mới</h2>
          <div id="commentList" class="vstack gap-3"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="py-5">
    <div class="container">
      <div class="row g-4 align-items-center">
        <div class="col-lg-7">
          <h2 class="h4">Về blog</h2>
          <p class="mb-1">Mẫu này trình diễn các yêu cầu:</p>
          <ul>
            <li>Navbar (menu) responsive, sticky-top.</li>
            <li>Badge đếm lượt xem theo từng bài (lưu LocalStorage).</li>
            <li>Màu chữ/nền danh mục theo chip.</li>
            <li>Pagination động (client-side) với Bootstrap Pagination.</li>
            <li>Form bình luận có <strong>Bootstrap Validation</strong> + quy tắc bổ sung.</li>
          </ul>
        </div>
        <div class="col-lg-5">
          <div class="p-4 rounded-4 border bg-body-tertiary">
            <div class="d-flex align-items-center gap-3">
              <i class="bi bi-bootstrap fs-1 text-primary"></i>
              <div>
                <div class="fw-semibold">Bootstrap 5.3</div>
                <small class="text-secondary">Thuần Bootstrap + JS thuần, không cần build tools.</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer class="py-4 border-top bg-light text-center text-secondary small">
    <div class="container">© 2025 Tin Mới 24/7 – Demo học tập Bootstrap.</div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // ====== DATA DEMO ======
    const ARTICLES = [
      { id:1, title:"AI vượt trội trong chẩn đoán hình ảnh", cate:"tech", excerpt:"Mô hình mới đạt độ chính xác 94% trên bộ dữ liệu X-quang ngực.", time:"2 giờ trước" },
      { id:2, title:"Thị trường khởi sắc nhờ cổ phiếu công nghệ", cate:"biz", excerpt:"VN-Index tăng mạnh khi nhóm công nghệ dẫn dắt.", time:"4 giờ trước" },
      { id:3, title:"5 thói quen nhỏ cải thiện sức khỏe", cate:"life", excerpt:"Đi ngủ đúng giờ và vận động nhẹ giúp tăng năng lượng.", time:"Hôm qua" },
      { id:4, title:"Đội tuyển U23 thắng kịch tính", cate:"sport", excerpt:"Bàn thắng phút 88 mang về 3 điểm.", time:"Hôm qua" },
      { id:5, title:"10 mẹo làm chủ Excel cho sinh viên", cate:"edu", excerpt:"PivotTable, VLOOKUP, XLOOKUP…", time:"2 ngày trước" },
      { id:6, title:"Chip 3nm mới tiết kiệm 30% điện", cate:"tech", excerpt:"Tiến trình mới hứa hẹn laptop mát hơn.", time:"2 ngày trước" },
      { id:7, title:"Khởi nghiệp tinh gọn: bắt đầu từ đâu?", cate:"biz", excerpt:"Xác định vấn đề – giải pháp – kênh phân phối.", time:"3 ngày trước" },
      { id:8, title:"Thiền 10 phút: tập trung hơn 2 giờ", cate:"life", excerpt:"Micro-meditation mang lại hiệu suất đáng kể.", time:"3 ngày trước" },
      { id:9, title:"Giải bóng đá sinh viên mở rộng", cate:"sport", excerpt:"32 đội tham dự, thi đấu vòng tròn.", time:"4 ngày trước" },
      { id:10, title:"Lộ trình tự học Data Science", cate:"edu", excerpt:"Python, Pandas, trực quan hóa dữ liệu.", time:"1 tuần trước" },
      { id:11, title:"Framework web cực nhẹ", cate:"tech", excerpt:"SSR mặc định, TTFB thấp.", time:"1 tuần trước" },
      { id:12, title:"Tài chính cá nhân 101", cate:"biz", excerpt:"Quản lý chi tiêu theo 50/30/20.", time:"1 tuần trước" },
    ];

    // ====== STATE ======
    const PAGE_SIZE = 6; // số bài mỗi trang
    let state = { page: 1, filter: 'all', search:'' };

    // ====== THEME TOGGLE ======
    document.getElementById('themeToggle').addEventListener('click', ()=>{
      const html = document.documentElement;
      html.setAttribute('data-bs-theme', html.getAttribute('data-bs-theme') === 'light' ? 'dark' : 'light');
    });

    // ====== RENDER ARTICLES ======
    function getViews(id){
      const views = JSON.parse(localStorage.getItem('views')||'{}');
      return views[id]||0;
    }
    function addView(id){
      const views = JSON.parse(localStorage.getItem('views')||'{}');
      views[id] = (views[id]||0) + 1;
      localStorage.setItem('views', JSON.stringify(views));
    }

    function filteredArticles(){
      const f = state.filter, q = state.search.trim().toLowerCase();
      return ARTICLES.filter(a => (f==='all' || a.cate===f) && (q==='' || a.title.toLowerCase().includes(q) || a.excerpt.toLowerCase().includes(q)) );
    }

    function renderArticles(){
      const listEl = document.getElementById('articleList');
      listEl.innerHTML = '';
      const data = filteredArticles();
      const total = data.length;
      const totalPages = Math.max(1, Math.ceil(total / PAGE_SIZE));
      if(state.page > totalPages) state.page = totalPages;
      const start = (state.page-1)*PAGE_SIZE;
      const pageItems = data.slice(start, start+PAGE_SIZE);

      // render cards
      pageItems.forEach(a=>{
        const views = getViews(a.id);
        const col = document.createElement('div');
        col.className = 'col-md-6 col-lg-4';
        col.innerHTML = `
          <article class="card h-100 article" data-id="${a.id}" data-cate="${a.cate}">
            <div class="card-body d-flex flex-column">
              <div class="d-flex align-items-center justify-content-between mb-2">
                <span class="category-chip" data-color="${mapCateColor(a.cate)}">${mapCateLabel(a.cate)}</span>
                <span class="badge text-bg-secondary badge-views" title="Lượt xem"><i class="bi bi-eye me-1"></i><span data-views>${views}</span></span>
              </div>
              <h3 class="h5 article-title">${escapeHTML(a.title)}</h3>
              <p class="text-secondary line-clamp-2 mb-4">${escapeHTML(a.excerpt)}</p>
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <small class="text-secondary">${a.time}</small>
                <a href="#" class="btn btn-sm btn-primary" data-open>Đọc nhanh</a>
              </div>
            </div>
          </article>`;
        listEl.appendChild(col);
      });

      // update select in comment form
      const sel = document.getElementById('cArticle');
      sel.innerHTML = ARTICLES.map(a=>`<option value="${a.id}">${a.id}. ${escapeHTML(a.title)}</option>`).join('');

      renderPagination(totalPages);

      // attach click events for view count demo
      listEl.querySelectorAll('[data-open]').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          e.preventDefault();
          const card = e.target.closest('.article');
          const id = Number(card.dataset.id);
          addView(id);
          card.querySelector('[data-views]').textContent = getViews(id);
          showToast(`Bạn vừa đọc: #${id} – ${ARTICLES.find(x=>x.id===id).title}`);
        });
      });
    }

    function renderPagination(totalPages){
      const ul = document.getElementById('pagi');
      ul.innerHTML = '';
      const makeItem = (label, page, disabled=false, active=false)=>{
        const li = document.createElement('li');
        li.className = `page-item ${disabled?'disabled':''} ${active?'active':''}`;
        li.innerHTML = `<a class="page-link" href="#">${label}</a>`;
        li.addEventListener('click', (e)=>{
          e.preventDefault(); if(disabled||active) return; state.page = page; renderArticles(); scrollToTop();
        });
        return li;
      };
      ul.appendChild(makeItem('<i class="bi bi-chevron-left"></i>', Math.max(1, state.page-1), state.page===1));
      for(let p=1; p<=totalPages; p++) ul.appendChild(makeItem(p, p, false, p===state.page));
      ul.appendChild(makeItem('<i class="bi bi-chevron-right"></i>', Math.min(totalPages, state.page+1), state.page===totalPages));
    }

    // ====== CATEGORY & SEARCH ======
    document.querySelectorAll('[data-filter]').forEach(el=>{
      el.addEventListener('click', ()=>{
        state.filter = el.dataset.filter; state.page = 1;
        document.querySelectorAll('[data-filter]').forEach(x=>x.classList.remove('active'));
        el.classList.add('active');
        renderArticles();
      });
    });

    function doSearch(){
      state.search = document.getElementById('searchInput').value; state.page=1; renderArticles();
    }

    // ====== COMMENT FORM VALIDATION ======
    // Bootstrap native validation pattern
    (()=>{
      const form = document.getElementById('commentForm');
      const content = document.getElementById('cContent');
      const counter = document.getElementById('charCount');
      content.addEventListener('input', ()=>{ counter.textContent = `${content.value.length}/500`; });

      form.addEventListener('submit', (event)=>{
        // extra custom rules
        const nameOk = /^.{2,60}$/.test(document.getElementById('cName').value.trim());
        const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(document.getElementById('cEmail').value.trim());
        const textOk = content.value.trim().length >= 10 && content.value.trim().length <= 500;

        if(!form.checkValidity() || !nameOk || !emailOk || !textOk){
          event.preventDefault(); event.stopPropagation();
        } else {
          event.preventDefault();
          saveComment();
          form.reset(); counter.textContent = '0/500';
          form.classList.remove('was-validated');
          showToast('Đã gửi bình luận!');
        }
        form.classList.add('was-validated');
      }, false);
    })();

    function saveComment(){
      const c = {
        id: cryptoRandomId(),
        name: document.getElementById('cName').value.trim(),
        email: document.getElementById('cEmail').value.trim(),
        articleId: Number(document.getElementById('cArticle').value),
        content: document.getElementById('cContent').value.trim(),
        time: new Date().toLocaleString('vi-VN')
      };
      const list = JSON.parse(localStorage.getItem('comments')||'[]');
      list.unshift(c);
      localStorage.setItem('comments', JSON.stringify(list));
      renderComments();
    }

    function renderComments(){
      const box = document.getElementById('commentList');
      const list = JSON.parse(localStorage.getItem('comments')||'[]');
      box.innerHTML = list.length ? '' : '<div class="text-secondary">Chưa có bình luận nào.</div>';
      list.slice(0, 10).forEach(c=>{
        const art = ARTICLES.find(a=>a.id===c.articleId);
        const el = document.createElement('div');
        el.className = 'comment-item';
        el.innerHTML = `
          <div class="d-flex justify-content-between align-items-center">
            <div class="fw-semibold">${escapeHTML(c.name)} <span class="text-secondary">• ${escapeHTML(c.email)}</span></div>
            <small class="text-secondary">${c.time}</small>
          </div>
          <div class="small text-secondary mb-1">Bài: #${c.articleId} – ${art?escapeHTML(art.title):'N/A'}</div>
          <div>${escapeHTML(c.content)}</div>
        `;
        box.appendChild(el);
      });
    }

    // ====== HELPERS ======
    function mapCateLabel(k){
      return ({tech:'Công nghệ', biz:'Kinh doanh', life:'Đời sống', sport:'Thể thao', edu:'Giáo dục'})[k]||k;
    }
    function mapCateColor(k){
      return ({tech:'tech', biz:'biz', life:'life', sport:'sport', edu:'edu'})[k]||'tech';
    }
    function escapeHTML(s){ return s.replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])); }
    function cryptoRandomId(){ return (self.crypto?.randomUUID?.()||Math.random().toString(36).slice(2,10)); }
    function scrollToTop(){ window.scrollTo({top:document.querySelector('header').offsetTop, behavior:'smooth'}); }

    // Toast (simple)
    function showToast(msg){
      const div = document.createElement('div');
      div.className = 'toast align-items-center text-bg-dark border-0 position-fixed bottom-0 end-0 m-3';
      div.setAttribute('role','status');
      div.setAttribute('aria-live','polite');
      div.setAttribute('aria-atomic','true');
      div.innerHTML = `
        <div class="d-flex">
          <div class="toast-body">${escapeHTML(msg)}</div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>`;
      document.body.appendChild(div);
      const t = new bootstrap.Toast(div, { delay: 2000 });
      t.show();
      div.addEventListener('hidden.bs.toast', ()=>div.remove());
    }

    // ====== INIT ======
    renderArticles();
    renderComments();
  </script>
</body>
</html>
